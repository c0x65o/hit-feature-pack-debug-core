name: debug-core
title: Debug
description: Debug utilities for system administrators (server stats, database stats, dashboard state)

# ─────────────────────────────────────────────────────────────────────────────
# ROUTES - Page routes with authz annotations
# ─────────────────────────────────────────────────────────────────────────────
routes:
  - path: /admin/debug/server-stats
    page: EntityList
    params: { entityKey: debug.serverStats }
  - path: /admin/debug/db-stats
    page: EntityList
    params: { entityKey: debug.dbStats }
  - path: /admin/debug/dashboard-state
    page: EntityList
    params: { entityKey: debug.dashboardState }
  - path: /admin/debug/ui-specs
    page: EntityList
    params: { entityKey: debug.uiSpec }
  - path: /admin/debug/ui-specs/[entityKey]
    page: EntityDetail
    params: { entityKey: debug.uiSpec }

# ─────────────────────────────────────────────────────────────────────────────
# NAV - Navigation entries
# ─────────────────────────────────────────────────────────────────────────────
nav:
  - id: debug
    label: Debug
    icon: Bug
    group: system
    roles: [admin]
    showWhen: authenticated
    weight: 910
    children:
      - id: debug-server-stats
        label: Server Stats
        path: /admin/debug/server-stats
        icon: Server
        weight: 10
        roles: [admin]
        showWhen: authenticated
      - id: debug-db-stats
        label: DB Stats
        path: /admin/debug/db-stats
        icon: Database
        weight: 20
        roles: [admin]
        showWhen: authenticated
      - id: debug-dashboard-state
        label: Dashboard State
        path: /admin/debug/dashboard-state
        icon: LayoutDashboard
        weight: 30
        roles: [admin]
        showWhen: authenticated
      - id: debug-ui-specs
        label: UI Specs
        path: /admin/debug/ui-specs
        icon: Table
        weight: 40
        roles: [admin]
        showWhen: authenticated

# ─────────────────────────────────────────────────────────────────────────────
# API ROUTES - Backend endpoints
# ─────────────────────────────────────────────────────────────────────────────
api:
  routes:
    - path: /api/debug/server-stats
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/server-stats"
      description: "Get server statistics (memory, CPU, disk, cgroup info). Admin only."
    - path: /api/debug/server-stats/[id]
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/server-stats-id"
      description: "Get server statistics by id (alias for server stats). Admin only."
    - path: /api/debug/db-stats
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/db-stats"
      description: "Get database statistics (table sizes, row counts, indexes). Admin only."
    - path: /api/debug/db-stats/[id]
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/db-stats-id"
      description: "Get database statistics by id (alias for db stats). Admin only."
    - path: /api/debug/dashboard-state
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/dashboard-state"
      description: "Get dashboard state debug info. Admin only."
    - path: /api/debug/dashboard-state/[id]
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/dashboard-state-id"
      description: "Get dashboard state by id (alias for dashboard state). Admin only."
    - path: /api/debug/ui-specs
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/ui-specs"
      description: "List merged UI specs from /hit-ui-specs.json. Admin only."
    - path: /api/debug/ui-specs/[id]
      methods: [GET]
      handler: "@hit/feature-pack-debug-core/server/api/ui-specs-id"
      description: "Get a UI spec by entity key (from /hit-ui-specs.json). Admin only."

# ─────────────────────────────────────────────────────────────────────────────
# PERMISSIONS - Action definitions (for admin-core permissions UI + runtime checks)
# ─────────────────────────────────────────────────────────────────────────────
# Permissions are schema-driven and live under:
#   schema/permissions.yaml
