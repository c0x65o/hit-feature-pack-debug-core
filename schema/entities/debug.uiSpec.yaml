version: 1

# UI entity spec for the debug UI specs browser.
# This is a "virtual" entity - data comes from /hit-ui-specs.json, not a database table.
entities:
  debug.uiSpec:
    meta:
      titleSingular: UI Spec
      titlePlural: UI Specs
      descriptionPlural: Public UI entities from /hit-ui-specs.json
      routes:
        root: /admin/debug
        list: /admin/debug/ui-specs
        detail: /admin/debug/ui-specs/{entityKey}
      breadcrumbs:
        - { label: Debug, href: /admin/debug }
        - { label: UI Specs, href: /admin/debug/ui-specs }

    list:
      tableId: debug.uiSpecs
      uiStateVersion: 1
      pageSize: 50
      initialSort:
        sortBy: entityKey
        sortOrder: asc
      sortWhitelist:
        - entityKey
        - tableId
        - drizzleTable
        - listColumnCount
        - fieldCount
        - formSectionCount
        - relationCount
        - headerActionCount
        - detailExtrasCount
      initialColumnVisibility:
        entityKey: true
        tableId: true
        drizzleTable: true
        listColumnCount: true
        fieldCount: true
        formSectionCount: false
        relationCount: false
        headerActionCount: false
        detailExtrasCount: false
      initialSorting:
        - id: entityKey
          desc: false
      columns:
        - entityKey
        - tableId
        - drizzleTable
        - listColumnCount
        - fieldCount
        - formSectionCount
        - relationCount
        - headerActionCount
        - detailExtrasCount

    # Canonical fields map (virtual entity; all fields are derived from /hit-ui-specs.json).
    fields:
      entityKey: { type: text, label: Entity, virtual: true }
      tableId: { type: text, label: tableId, virtual: true }
      drizzleTable: { type: text, label: drizzleTable, virtual: true }
      listColumnCount: { type: number, label: "# list cols", virtual: true }
      fieldCount: { type: number, label: "# fields", virtual: true }
      formSectionCount: { type: number, label: "# form sections", virtual: true }
      relationCount: { type: number, label: "# relations", virtual: true }
      headerActionCount: { type: number, label: "# header actions", virtual: true }
      detailExtrasCount: { type: number, label: "# detail extras", virtual: true }

    detail:
      # Sub-tables for the detail view
      metaRoutes:
        tableId: debug.uiSpecs.metaRoutes
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: path
            label: path
            sortable: false
            filterType: string

      breadcrumbs:
        tableId: debug.uiSpecs.breadcrumbs
        columns:
          - key: label
            label: label
            sortable: true
            filterType: string
          - key: href
            label: href
            sortable: false
            filterType: string

      metaActions:
        tableId: debug.uiSpecs.metaActions
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: value
            label: value
            sortable: false
            filterType: string

      headerActions:
        tableId: debug.uiSpecs.headerActions
        columns:
          - key: kind
            label: kind
            sortable: true
            filterType: string
          - key: label
            label: label
            sortable: false
            filterType: string
          - key: actionKey
            label: actionKey
            sortable: false
            filterType: string
          - key: icon
            label: icon
            sortable: false
            filterType: string
          - key: platforms
            label: platforms
            sortable: false
            filterType: string
          - key: visibility
            label: visibility
            sortable: false
            filterType: string

      listColumns:
        tableId: debug.uiSpecs.listColumns
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: label
            label: label
            sortable: false
            filterType: string
          - key: filterType
            label: filterType
            sortable: false
            filterType: string
          - key: sortable
            label: sortable
            sortable: false
            filterType: boolean
          - key: reference
            label: reference
            sortable: false
            filterType: string

      fields:
        tableId: debug.uiSpecs.fields
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: label
            label: label
            sortable: false
            filterType: string
          - key: type
            label: type
            sortable: false
            filterType: string
          - key: required
            label: required
            sortable: false
            filterType: boolean
          - key: extra
            label: extra
            sortable: false
            filterType: string

      listConfig:
        tableId: debug.uiSpecs.listConfig
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: value
            label: value
            sortable: false
            filterType: string

      formSections:
        tableId: debug.uiSpecs.formSections
        columns:
          - key: id
            label: id
            sortable: true
            filterType: string
          - key: title
            label: title
            sortable: false
            filterType: string
          - key: layout
            label: layout
            sortable: false
            filterType: string
          - key: widget
            label: widget
            sortable: false
            filterType: string
          - key: relation
            label: relation
            sortable: false
            filterType: string
          - key: fields
            label: fields
            sortable: false
            filterType: string

      relations:
        tableId: debug.uiSpecs.relations
        columns:
          - key: key
            label: key
            sortable: true
            filterType: string
          - key: kind
            label: kind
            sortable: false
            filterType: string
          - key: persist
            label: persist
            sortable: false
            filterType: string
          - key: primary
            label: primary
            sortable: false
            filterType: string
          - key: uiTitle
            label: ui.title
            sortable: false
            filterType: string
          - key: fieldCount
            label: "# ui fields"
            sortable: true
            filterType: number

      detailExtras:
        tableId: debug.uiSpecs.detailExtras
        columns:
          - key: kind
            label: kind
            sortable: true
            filterType: string
          - key: title
            label: title
            sortable: false
            filterType: string
          - key: entityType
            label: entityType
            sortable: false
            filterType: string
          - key: tableId
            label: tableId
            sortable: false
            filterType: string
          - key: platforms
            label: platforms
            sortable: false
            filterType: string
          - key: query
            label: query
            sortable: false
            filterType: string
          - key: createRoute
            label: createRoute
            sortable: false
            filterType: string
          - key: emptyMessage
            label: emptyMessage
            sortable: false
            filterType: string
